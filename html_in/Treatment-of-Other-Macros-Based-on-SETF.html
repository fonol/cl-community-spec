<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Treatment of Other Macros Based on SETF (ANSI and GNU Common Lisp Document)</title>

<meta name="description" content="Treatment of Other Macros Based on SETF (ANSI and GNU Common Lisp Document)">
<meta name="keywords" content="Treatment of Other Macros Based on SETF (ANSI and GNU Common Lisp Document)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html#Top" rel="start" title="Top">
<link href="Generalized-Reference.html#Generalized-Reference" rel="up" title="Generalized Reference">
<link href="Transfer-of-Control-to-an-Exit-Point.html#Transfer-of-Control-to-an-Exit-Point" rel="next" title="Transfer of Control to an Exit Point">
<link href="Other-Compound-Forms-as-Places.html#Other-Compound-Forms-as-Places" rel="prev" title="Other Compound Forms as Places">



</head>

<body lang="en">
<a name="Treatment-of-Other-Macros-Based-on-SETF"></a>
<div class="header">
<p>
Previous: <a href="Kinds-of-Places.html#Kinds-of-Places" accesskey="p" rel="prev">Kinds of Places</a>, Up: <a href="Generalized-Reference.html#Generalized-Reference" accesskey="u" rel="up">Generalized Reference</a> &nbsp; </p>
</div>
<hr>
<a name="Treatment-of-Other-Macros-Based-on-SETF-1"></a>
<h4 class="subsection">5.1.3 Treatment of Other Macros Based on SETF</h4>

<p>For each of the "read-modify-write" <i>operators</i> in Figure 5&ndash;9, 
and for any additional <i>macros</i> 
defined by the <i>programmer</i> using <a href="define_002dmodify_002dmacro.html">define-modify-macro</a>,
an exception is made to the normal rule of left-to-right evaluation of arguments.
Evaluation of <i>argument</i> <i>forms</i> occurs in left-to-right order,
with the exception that for the <i>place</i> <i>argument</i>, the actual
<i>read</i> of the "old value" from that <i>place</i> happens 
after all of the <i>argument</i> <i>form</i> <i>evaluations</i>, 
and just before a "new value" is computed and <i>written</i> back into the <i>place</i>.
</p>
<p>Specifically, each of these <i>operators</i> can be viewed as involving a
<i>form</i> with the following general syntax:
</p>
<div class="example">
<pre class="example"> (<i>operator</i> {<i>preceding-form</i>}* <i>place</i> {<i>following-form</i>}*)
</pre></div>

<p>The evaluation of each such <i>form</i> proceeds like this:
</p>
<dl compact="compact">
<dt>1.</dt>
<dd><p><i>Evaluate</i> each of the <i>preceding-forms</i>, in left-to-right order.
</p></dd>
<dt>2.</dt>
<dd><p><i>Evaluate</i> the <i>subforms</i> of the <i>place</i>,
 in the order specified by the second value of the <i>setf expansion</i>
 for that <i>place</i>.
</p></dd>
<dt>3.</dt>
<dd><p><i>Evaluate</i> each of the <i>following-forms</i>, in left-to-right order.
</p></dd>
<dt>4.</dt>
<dd><p><i>Read</i> the old value from <i>place</i>.
</p></dd>
<dt>5.</dt>
<dd><p>Compute the new value.
</p></dd>
<dt>6.</dt>
<dd><p>Store the new value into <i>place</i>.
</p></dd>
</dl>

<p>&nbsp;&nbsp;decf&nbsp;&nbsp;<a href="pop.html">pop</a>&nbsp;&nbsp;&nbsp;<a href="pushnew.html">pushnew</a>&nbsp;&nbsp;
&nbsp;&nbsp;<a href="incf.html">incf</a>&nbsp;&nbsp;<a href="push.html">push</a>&nbsp;&nbsp;<a href="remf.html">remf</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</p>
<p>&nbsp;&nbsp;Figure&nbsp;5&ndash;9:&nbsp;<span class="nolinebreak">Read-Modify-Write</span>&nbsp;Macros
</p>





</body>
</html>
