<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="/favicon.ico">
<link rel="stylesheet" href="/styles.css">
<link rel="stylesheet" href="/highlight-lisp/themes/github.css">
<script defer src="/scripts.js"></script>
<title>defmethod (CLCS)</title>

<link href="index.html#Top" rel="start" title="Top">
<link href="Objects-Dictionary.html#Objects-Dictionary" rel="up" title="Objects Dictionary">
<link href="find_002dclass.html#find_002dclass" rel="next" title="find-class">
<link href="defgeneric.html#defgeneric" rel="prev" title="defgeneric">


</head>

<body lang="en">

                        <div class="top-wrapper">
                            <div class="top">
                                <div class="search">
                                    <svg height="20" width="20" viewBox="0 0 512 512"><path d="M221.09 64a157.09 157.09 0 10157.09 157.09A157.1 157.1 0 00221.09 64z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"/><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M338.29 338.29L448 448"/></svg>
                                    <input type="text" oninput="search(event)" onkeydown="searchKeydown(event)" placeholder="Search for pages">
                                    <div id="search__drop" onblur="hideSearch()"></div>
                                </div>
                                <a class="index-btn" href="index.html">
                                    <svg height="20" width="20" viewBox="0 0 512 512"><title>Index</title><path d="M80 212v236a16 16 0 0016 16h96V328a24 24 0 0124-24h80a24 24 0 0124 24v136h96a16 16 0 0016-16V212" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/><path d="M480 256L266.89 52c-5-5.28-16.69-5.34-21.78 0L32 256M400 179V64h-48v69" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"/></svg>
                                </a>
                            </div>
                        </div>
                        <div class="nav">
                            <a href="defgeneric.html" class="nav-btn nav__prev ">
                                <svg height="14" width="14" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M328 112L184 256l144 144"/></svg>
                                defgeneric
                            </a>
                            <a href="Objects-Dictionary.html" class="nav-btn nav__up ">
                                <svg height="14" width="14" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M112 328l144-144 144 144"/></svg>
                                Objects Dictionary
                            </a>
                            <a href="find_002dclass.html" class="nav-btn nav__next ">
                                find-class
                                <svg height="14" width="14" viewBox="0 0 512 512"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="48" d="M184 112l144 144-144 144"/></svg>
                            </a>
                        </div>
                    
<div class="section top-most">
<div class="node-type">Macro</div>
<h4 class="subsection">defmethod                                                           </h4>

<p><code>defmethod</code>  <i><i>function-name</i>
				      {<i>method-qualifier</i></i>}*
				      <i>specialized-lambda-list</i>
				[[{<i>declaration</i>}* | <i>documentation</i>]] {<i>form</i>}*<br>
   &rArr;  <i>new-method</i>
</p>
<p><i>function-name</i>::= {<i>symbol</i> 
| <tt>(setf <i>symbol</i>)</tt>}
</p>
<p><i>method-qualifier</i>::= <i>non-list</i>
</p>
<table>
<tr><td>&nbsp;<i><span class="nolinebreak">specialized-lambda-list</span></i>::=&nbsp;({<i>var</i>&nbsp;|&nbsp;<span class="roman">(</span><i>var</i>&nbsp;<i><span class="nolinebreak">parameter-specializer-name</span></i><span class="roman">)</span>}*<br></td></tr>
<tr><td><tt>[</tt>&amp;optional {<i>var</i> | <span class="roman">(</span>var <tt>[</tt><i>initform</i> <span class="roman">[</span><i>supplied-p-parameter</i><span class="roman">]</span> <tt>]</tt><span class="roman">)</span>}*<tt>]</tt><br></td></tr>
<tr><td><tt>[</tt><tt>&amp;rest</tt>&nbsp;<i>var</i><tt>]</tt><br></td></tr>
<tr><td><tt>[</tt>&amp;key{<i>var</i> | <span class="roman">(</span>{<i>var</i> | <span class="roman">(</span><i>keyword</i><i>var</i><span class="roman">)</span>} <tt>[</tt><i>initform</i> <span class="roman">[</span><i>supplied-p-parameter</i><span class="roman">]</span> <tt>]</tt><span class="roman">)</span>}*<br></td></tr>
<tr><td><span class="roman">[</span><b><span class="nolinebreak">&amp;allow-other-keys</span></b><span class="roman">]</span>&nbsp;<tt>]</tt><br></td></tr>
<tr><td><tt>[</tt><tt>&amp;aux</tt>&nbsp;{<i>var</i>&nbsp;|&nbsp;<span class="roman">(</span><i>var</i>&nbsp;<span class="roman">[</span><i>initform</i><span class="roman">]</span>&nbsp;<span class="roman">)</span>}*<tt>]</tt> <span class="roman">)</span><br></td></tr>
</table>
<table>
<tr><td>&nbsp;<i><span class="nolinebreak">parameter-specializer-name</span></i>::=&nbsp;<i>symbol</i>&nbsp;|&nbsp;<span class="roman">(</span><tt>eql</tt>&nbsp;<i><span class="nolinebreak">eql-specializer-form</span></i><span class="roman">)</span><br></td></tr>
</table>
</div>
<div class="section">
<h4 class="subsubheading">Arguments and Values</h4>

<p><i>declaration</i>&mdash;a <b>declare</b> <i>expression</i>; not evaluated.
</p>
<p><i>documentation</i>&mdash;a <i>string</i>; not evaluated.
</p>
<p><i>var</i>&mdash;a <i>variable</i> <i>name</i>.
</p>
<p><i>eql-specializer-form</i>&mdash;a <i>form</i>.
</p>
<p><i>Form</i>&mdash;a <i>form</i>.
</p>
<p><i>Initform</i>&mdash;a <i>form</i>.
</p>
<p><i>Supplied-p-parameter</i>&mdash;variable name. 
</p>
<p><i>new-method</i>&mdash;the new <i>method</i> <i>object</i>.
</p>
</div>
<div class="section">
<h4 class="subsubheading">Description</h4>

<p>The macro <b>defmethod</b> defines a <i>method</i> on a 
<i>generic function</i>.  
</p>
<p>If <tt>(fboundp <i>function-name</i>)</tt> is <a href="NILv.html">nil</a>, a 
<i>generic function</i> is created with default values for 
the argument precedence order
(each argument is more specific than the arguments to its right
in the argument list),
for the generic function class (the <i>class</i> <b>standard-generic-function</b>),
for the method class (the <i>class</i> <b>standard-method</b>),
and for the method combination type (the standard method combination type).
The <i>lambda list</i> of the <i>generic function</i> is
congruent with the <i>lambda list</i> of the 
<i>method</i> being defined; if the
<b>defmethod</b> form mentions keyword arguments, the <i>lambda list</i> of
the <i>generic function</i> 
will mention <tt>&amp;key</tt> (but no keyword
arguments).  If <i>function-name</i> names 
an <i>ordinary function</i>,
a <i>macro</i>, or a <i>special operator</i>, 
an error is signaled.
</p>
<p>If a <i>generic function</i> is currently named by <i>function-name</i>,
the <i>lambda list</i> of the
<i>method</i> must be congruent with the <i>lambda list</i> of the 
<i>generic function</i>.
If this condition does not hold, an error is signaled.  
For a definition of congruence in this context, see <a href="Congruent-Lambda_002dlists-for-all-Methods-of-a-Generic-Function.html#Congruent-Lambda_002dlists-for-all-Methods-of-a-Generic-Function">Congruent Lambda-lists for all Methods of a Generic Function</a>.
</p>
<p>Each <i>method-qualifier</i> argument is an <i>object</i> that is used by
method combination to identify the given <i>method</i>.  
The method combination type might further
restrict what a method <i>qualifier</i> can be.
The standard method combination type allows for <i>unqualified methods</i> and
<i>methods</i> whose sole
<i>qualifier</i> is one of the keywords <tt>:before</tt>, <tt>:after</tt>, or <tt>:around</tt>.
</p>
<p>The <i>specialized-lambda-list</i> argument is like an ordinary
<i>lambda list</i> except that the <i>names</i> of required parameters can
be replaced by specialized parameters.  A specialized parameter is a
list of the form 
<tt>(<i>var</i> <i>parameter-specializer-name</i>)</tt>.
Only required parameters can be
specialized.  If <i>parameter-specializer-name</i> is a <i>symbol</i> it names a
<i>class</i>; if it is a <i>list</i>,
it is of the form <tt>(eql <i>eql-specializer-form</i>)</tt>.  The parameter
specializer name <tt>(eql <i>eql-specializer-form</i>)</tt> indicates
that the corresponding argument must be <b>eql</b> to the <i>object</i> that
is the value of <i>eql-specializer-form</i> for the <i>method</i> to be applicable.  
The <i>eql-specializer-form</i> is evaluated at the time
that the expansion of the <b>defmethod</b> macro is evaluated.  
If no <i>parameter specializer name</i> is specified for a given
required parameter, the <i>parameter specializer</i> defaults to 
the <i>class</i> <a href="t.html">t</a>.
For further discussion, see <a href="Introduction-to-Methods.html#Introduction-to-Methods">Introduction to Methods</a>.
</p>
<p>The <i>form</i> arguments specify the method body.
The body of the <i>method</i> is enclosed in an <i>implicit block</i>.  If
<i>function-name</i> is a <i>symbol</i>, 
this block bears the same <i>name</i> as the <i>generic function</i>.  
If <i>function-name</i> is a <i>list</i> of the form 
<tt>(setf <i>symbol</i>)</tt>, the <i>name</i> of the block is <i>symbol</i>.  
</p>
<p>The <i>class</i> of the <i>method</i> <i>object</i> that is created is that given by the 
method class option of the <i>generic function</i> 
on which the <i>method</i> is defined.
</p>
<p>If the <i>generic function</i> already has a <i>method</i> that agrees with the
<i>method</i> being defined on <i>parameter specializers</i> and <i>qualifiers</i>,
<b>defmethod</b> replaces the existing <i>method</i> with the one now being
defined.
For a definition of agreement in this context.
see <a href="Agreement-on-Parameter-Specializers-and-Qualifiers.html#Agreement-on-Parameter-Specializers-and-Qualifiers">Agreement on Parameter Specializers and Qualifiers</a>.
</p>
<p>The <i>parameter specializers</i> are derived from 
the <i>parameter specializer names</i> as described in
<a href="Introduction-to-Methods.html#Introduction-to-Methods">Introduction to Methods</a>.
</p>
<p>The expansion of the <b>defmethod</b> macro &ldquo;refers to&rdquo; each
specialized parameter (see the description of <b>ignore</b> 
within the description of <b>declare</b>).
This includes parameters that
have an explicit <i>parameter specializer name</i> of <a href="t.html">t</a>.  This means
that a compiler warning does not occur if the body of the <i>method</i> does
not refer to a specialized parameter, while a warning might occur
if the body of the <i>method</i> does not refer to an unspecialized parameter.
For this reason, a parameter that specializes on <a href="t.html">t</a> is not quite synonymous
with an unspecialized parameter in this context.
</p>
<p>Declarations at the head of the method body that apply to the 
method&rsquo;s <i>lambda variables</i> are treated as <i>bound declarations</i>
whose <i>scope</i> is the same as the corresponding <i>bindings</i>.
</p>
<p>Declarations at the head of the method body that apply to the 
functional bindings of <b>call-next-method</b> or <b>next-method-p</b>
apply to references to those functions within the method body <i>forms</i>.
Any outer <i>bindings</i> of the <i>function names</i> <b>call-next-method</b> and
<b>next-method-p</b>, and declarations associated with such <i>bindings</i>
are <i>shadowed</i>_2 within the method body <i>forms</i>.
</p>
<p>The <i>scope</i> of <i>free declarations</i> at the head of the method body 
is the entire method body, 
which includes any implicit local function definitions
  but excludes <i>initialization forms</i> for the <i>lambda variables</i>.
</p>
<p><b>defmethod</b> is not required to perform any compile-time side effects.
In particular, the <i>methods</i> are not installed for invocation during 
compilation.  An <i>implementation</i> may choose to store information about
the <i>generic function</i> for the purposes of compile-time error-checking
(such as checking the number of arguments on calls, or noting that a definition
 for the function name has been seen).
</p>
<p><i>Documentation</i> is attached as a <i>documentation string</i>
to the <i>method</i> <i>object</i>.
</p>
</div>
<div class="section">
<h4 class="subsubheading">Affected By</h4>

<p>The definition of the referenced <i>generic function</i>.
</p>
</div>
<div class="section">
<h4 class="subsubheading">Exceptional Situations</h4>

<p>If <i>function-name</i> names an <i>ordinary function</i>,
a <i>macro</i>, or a <i>special operator</i>, 
an error of <i>type</i> <b>error</b> is signaled.
</p>
<p>If a <i>generic function</i> is currently named by <i>function-name</i>,
the <i>lambda list</i> of the
<i>method</i> must be congruent with the <i>lambda list</i> of the 
<i>generic function</i>, or
an error of <i>type</i> <b>error</b> is signaled.
</p>
</div>
<div class="section">
<h4 class="subsubheading">See Also</h4>

<p><a href="defgeneric.html#defgeneric">defgeneric</a>, 
 
<a href="documentation.html">documentation; (setf documentation)</a>, 

<a href="Introduction-to-Methods.html#Introduction-to-Methods">Introduction to Methods</a>,
<a href="Congruent-Lambda_002dlists-for-all-Methods-of-a-Generic-Function.html#Congruent-Lambda_002dlists-for-all-Methods-of-a-Generic-Function">Congruent Lambda-lists for all Methods of a Generic Function</a>,
<a href="Agreement-on-Parameter-Specializers-and-Qualifiers.html#Agreement-on-Parameter-Specializers-and-Qualifiers">Agreement on Parameter Specializers and Qualifiers</a>,
<a href="Syntactic-Interaction-of-Documentation-Strings-and-Declarations.html#Syntactic-Interaction-of-Documentation-Strings-and-Declarations">Syntactic Interaction of Documentation Strings and Declarations</a>
</p>



</div>

                    <div class="section">
                        <h3>Backlinks</h3>
                        <a href="add_002dmethod.html">add-method</a>, <a href="call_002dnext_002dmethod.html">call-next-method</a>, <a href="defgeneric.html">defgeneric</a>, <a href="function_002dkeywords.html">function-keywords</a>, <a href="next_002dmethod_002dp.html">next-method-p</a>, <a href="Objects-Dictionary.html">Objects Dictionary</a>
                    </div>
                
</body>
<script type="text/javascript" src="/highlight-lisp/highlight-lisp.js"></script>
</html>
